<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>창민과 나연의 결혼식에 초대합니다</title>
    <meta content="김창민과 김나연의 결혼식에 와서 축하해주세요~!" name="description"/>
    <meta property="og:image" content="images/pic2.jpeg">
    <meta property="fb:app_id" content="781066922265598" />
    <meta property="fb:admins" content="Choi.Anderson"/>
    <link href="images/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
    <link href="images/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
    <link href="images/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
    <link href="https://fonts.googleapis.com/css?family=Dosis:400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
    <link href="css/ekko-lightbox.css" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Gamja+Flower|Gugi|Noto+Serif+KR|Stylish|Sunflower:300"
          rel="stylesheet">
    <script src="https://code.jquery.com/jquery-2.2.1.js"></script>


    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/remarkable/1.7.1/remarkable.js" type="text/javascript"></script>
    <script type="text/javascript">
        function sendMail() {

            (function () {
                emailjs.init("user_yjLL5xG0A3kkOCH5BGIDh");
                emailjs.send("wedding-mail", "gift_send", {
                    name: $("#sender-name").value,
                    gift: $("#gift-name").text(),
                    message: $("#sender-message").value
                }).then(function (response) {
                    console.log("SUCCESS. status=%d, text=%s", response.status, response.text);
                }, function (err) {
                    console.log("FAILED. error=", err);
                });
            })();
        }

        function findGetParameter(parameterName) {
            var result = null,
                tmp = [];
            location.search
                .substr(1)
                .split("&")
                .forEach(function (item) {
                  tmp = item.split("=");
                  if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
                });
            return result;
        }

        $(document).ready(function () {

            function getText(){
                var result = null;
                $.ajax( { url: "https://raw.githubusercontent.com/AndersonChoi/wedding-card/master/README.md",
                        type: 'get',
                        dataType: 'html',
                        async: false,
                        success: function(data) { result = data; }
                    }
                );
                FileReady = true;
                return result;
            }
            var markdown_source = getText();
            var comment_contents = markdown_source.split("축하의 말")[1];

            var md = new Remarkable();
            $("#comments").append(md.render(comment_contents));

            
            if(findGetParameter('gift')=='false'){
                $('#gifts').hide();
            }
        });




    </script>
</head>

<body id="top">
<header></header>
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v3.2"></script>
<div class="page-content">
    <div class="div">
        <div class="ww-home-page" id="home">
            <div class="ww-wedding-announcement d-flex align-items-center justify-content-start">
                <div class="container ww-announcement-container">
                    <p class="ww-couple-name ww-title" style="font-size:4.0em">Changmin & Nayeon</p>
                    <p class="h2 mt-5 ww-title" style="font-family: 'Gugi', cursive; font-size:1.0em">
                        | WE ARE GETTING MARRIED |
                    </p>
                    <p class="h2 mt-5 ww-title"
                       style="font-family: 'Noto Serif KR', serif; font-size:1.5em; letter-spacing:0px">
                        <b style="font-size:1.4em;">2025. 09. 20. SAT PM 02:00</b>
                        <br>경기 수원 호텔리츠컨벤션웨딩 7층
                    </p>
                </div>
            </div>
        </div>
        <div class="ww-nav-bar sticky-top bg-light">
            <nav class="navbar navbar-expand-lg navbar-light">
                <div class="container">
                    <button aria-controls="ww-navbarNav" aria-expanded="false" aria-label="Toggle navigation"
                            class="navbar-toggler"
                            data-target="#ww-navbarNav" data-toggle="collapse" type="button">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse text-uppercase" id="ww-navbarNav">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item"><a class="nav-link smooth-scroll" href="#home">Home</a></li>
                            <li class="nav-item"><a class="nav-link smooth-scroll" href="#events">Events</a></li>
                            <li class="nav-item"><a class="nav-link smooth-scroll" href="#gallery">Gallery</a></li>
                            <li class="nav-item"><a class="nav-link smooth-scroll" href="#map">Map</a></li>
                            <li class="nav-item"><a class="nav-link smooth-scroll" href="#comment">Comments</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <!--
        <div class="ww-section" id="couple">
            <div class="container">
                <h2 class="h1 text-center pb-3 ww-title" style="font-family: 'Noto Serif KR', serif;">신랑 & 신부</h2>
                <div class="row text-center">
                    <div class="col-md-6">
                        <div class="mt-3">
                            <h3 class="h2 ww-title" style="font-family: 'Sunflower', sans-serif; font-size:1.5em">
                                이소민</h3>
                            <img alt="Groom" class="img-fluid" src="images/pic8.jpeg"/>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mt-3">
                            <h3 class="h2 ww-title" style="font-family: 'Sunflower', sans-serif; font-size:1.5em">
                                최원영</h3>
                            <img alt="Bride" class="img-fluid" src="images/pic9.jpeg"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        -->
        <div class="ww-section bg-light" id="events">
            <div class="container ww-wedding-event">
                <h2 class="h1 text-center pb-3 ww-title" style="font-family: 'Noto Serif KR', serif;">우리의 결혼식에 초대합니다</h2>
                    <div class="col text-center mb-5">
                        <h6 style="font-family: 'Noto Serif KR', serif;">
                            <!-- ...existing code... -->
                            <span id="countdown" style="font-weight:bold; color:#b48e5c;"></span>
                            <script>
                            // 2025년 9월 20일 14시를 목표로 카운트다운
                            function updateCountdown() {
                                var target = new Date("2025-09-20T14:00:00");
                                var now = new Date();
                                var diff = target - now;
                            
                                if (diff <= 0) {
                                    document.getElementById('countdown').textContent = "축하합니다! 결혼식이 시작되었습니다!";
                                    return;
                                }
                            
                                var days = Math.floor(diff / (1000 * 60 * 60 * 24));
                                var hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                                var minutes = Math.floor((diff / (1000 * 60)) % 60);
                                var seconds = Math.floor((diff / 1000) % 60);
                            
                                document.getElementById('countdown').textContent =
                                    "결혼식까지 " + days + "일 " + hours + " : " + minutes + " : " + seconds + " 남았습니다";
                            }
                            updateCountdown();
                            setInterval(updateCountdown, 1000);
                            </script>
                            <!-- ...existing code... -->
                            <br>
                        </h6>
                    </div>
                <div class="row">
                    <div class="col-md-7 col-sm-12">
                        <div class="my-3">
                            <div class="h4">웨딩 본식</div>
                            <ul>
                                <li>
                                    <i class="text-muted fas fa-map-marker-alt"></i>
                                    <span class="pl-2 text-muted">부산 해운대 우동 센텀사이언스 파크 23층</span>
                                </li>
                                <li class="pt-2">
                                    <i class="text-muted far fa-calendar-alt"></i>
                                    <span class="pl-2 text-muted">2019년 5월 18일, 2:30PM</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-5 col-sm-12">
                        <div class="my-3">
                            <img alt="Wedding Party" class="img-fluid" src="images/wedding-party.jpg"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-7 col-sm-12">
                        <div class="my-3">
                            <div class="h4">식사</div>
                            <ul>
                                <li>
                                    <i class="text-muted fas fa-map-marker-alt "></i>
                                    <span class="pl-2 text-muted">부산 해운대 우동 센텀사이언스 파크 지하 1층 더파티 센텀점</span>
                                </li>
                                <li class="pt-2">
                                    <i class="text-muted far fa-calendar-alt "></i>
                                    <span class="pl-2 text-muted">2019년 5월 18일, 2:30PM - 4:30PM</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-5 col-sm-12">
                        <div class="my-3"><img alt="Reception" class="img-fluid" src="images/reception.jpg"/></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ww-section" id="gallery">
            <div class="ww-photo-gallery">
                <div class="container">
                    <h2 class="h1 text-center pb-3 ww-title" style="font-family: 'Noto Serif KR', serif;">포토 갤러리</h2>
                    <div class="ww-gallery">
                        <div class="card-columns">
                            <div class="card" data-groups="[&quot;party&quot;,&quot;wedding&quot;]">
                                <a data-gallery="ww-gallery" data-toggle="lightbox">
                                    <img alt="Gallery Pic 2" class="img-fluid" src="images/pic2.jpeg"/>
                                </a>
                            </div>
                            <div class="card" data-groups="[&quot;vacation&quot;]">
                                <a data-gallery="ww-gallery" data-toggle="lightbox">
                                    <img alt="Gallery Pic 3" class="img-fluid" src="images/pic3.jpeg"/>
                                </a>
                            </div>
                            <div class="card" data-groups="[&quot;party&quot;,&quot;vacation&quot;]">
                                <a data-gallery="ww-gallery" data-toggle="lightbox">
                                    <img alt="Gallery Pic 4" class="img-fluid" src="images/pic4.jpeg"/>
                                </a>
                            </div>
                            <div class="card" data-groups="[&quot;vacation&quot;]">
                                <a data-gallery="ww-gallery" data-toggle="lightbox">
                                    <img alt="Gallery Pic 5" class="img-fluid" src="images/pic6.jpeg"/>
                                </a>
                            </div>
                            <div class="card"
                                 data-groups="[&quot;wedding&quot;,&quot;ceremony&quot;,&quot;party&quot;]">
                                <a data-gallery="ww-gallery" data-toggle="lightbox">
                                    <img alt="Gallery Pic 6" class="img-fluid" src="images/pic7.jpeg"/>
                                </a>
                            </div>
                            <div class="card" data-groups="[&quot;vacation&quot;]">
                                <a data-gallery="ww-gallery" data-toggle="lightbox">
                                    <img alt="Gallery Pic 7" class="img-fluid" src="images/pic5.jpeg"/>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       <!--
        <div class="ww-section parallax-window  text-white" data-parallax="scroll" data-image-src="images/gift/gift-background.jpg" id="gifts">
            <div class="ww-gift-section">
                <div class="container">
                    <h2 class="h1 text-center pb-3 ww-title" style="font-family: 'Noto Serif KR', serif;">Gift for our
                        wedding</h2>
                    <div class="col text-center mb-5">
                        <h6 style="font-family: 'Noto Serif KR', serif;">
                            저희 부부가 앞으로 살아나갈 일상에<br>
                            오래도록 특별한 기억을 선물하고 싶으신가요?<br>
                            그렇다면 고민하는 대신 아래 목록을 참고해 주세요.<br>
                            저희가 필요로 하는 물건들을 정리해 두었습니다.<br>
                            애정어린 마음으로 보내주신 선물은<br>
                            가까이 두어 오래도록 아껴 쓰고,<br>
                            소중하게 간직하겠습니다.
                            <br><br>
                            (아래 선물버튼을 눌러 신랑, 신부에게 예약메시지를 보내세요!)
                        </h6>
                    </div>
                    <div class="ww-gift">
                        <div class="gift-columns">
                            <div class="gift">
                                <img alt="와인셀러" class="img-fluid gift-img gift-selected" src="images/gift/wineceller.png"/>
                                <div class="btn-group gift-btn-group" role="group">
                                    <button class="btn btn-default gift-btn"
                                            onclick="window.open('https://smartstore.naver.com/dhk00840/products/4311205513')">
                                        <i class="fa fa-search"></i></button>
                                    <button class="btn btn-default gift-btn gift-send" data-name="와인셀러"
                                            onclick="alert('다른분에게 예약된 선물입니다.');"><i
                                            class="fa fa-gift"></i></button>
                                </div>
                            </div>
                            <div class="gift">
                                <img alt="전동클렌저" class="img-fluid gift-img gift-selected"
                                     src="images/gift/philips_clenser.png"/>
                                <div class="btn-group gift-btn-group" role="group">
                                    <button class="btn btn-default gift-btn"
                                            onclick="window.open('https://www.philips.co.kr/c-p/BSC111_06/visapure-mini-facial-cleanser')">
                                        <i class="fa fa-search"></i></button>
                                    <button class="btn btn-default gift-btn gift-send" data-name="전동클렌저"
                                            onclick="alert('다른분에게 예약된 선물입니다.');"><i
                                            class="fa fa-gift"></i></button>
                                </div>
                            </div>
                            <div class="gift">
                                <img alt="드라이기" class="img-fluid gift-img gift-selected" src="images/gift/dyson.png"/>
                                <div class="btn-group gift-btn-group" role="group">
                                    <button class="btn btn-default gift-btn"
                                            onclick="window.open('https://www.kr.dyson.com/products/hair-care/dyson-supersonic-hair-dryer')">
                                        <i class="fa fa-search"></i></button>
                                    <button  class="btn btn-default gift-btn gift-send" data-name="드라이기"
                                             onclick="alert('다른분에게 예약된 선물입니다.');"><i
                                            class="fa fa-gift"></i></button>
                                </div>
                            </div>
                            <div class="gift">
                                <img alt="믹서기" class="img-fluid gift-img gift-selected" src="images/gift/blender.png"/>
                                <div class="btn-group gift-btn-group" role="group">
                                    <button class="btn btn-default gift-btn"
                                            onclick="window.open('http://jenniferoom.co.kr/product/detail.html?product_no=85&cate_no=24&display_group=1')">
                                        <i class="fa fa-search"></i></button>
                                    <button  class="btn btn-default gift-btn gift-send" data-name="믹서기"
                                             onclick="alert('다른분에게 예약된 선물입니다.');"><i
                                            class="fa fa-gift"></i></button>
                                </div>
                            </div>
                            <div class="gift">
                                <img alt="레고" class="img-fluid gift-img gift-selected" src="images/gift/lego.png"/>
                                <div class="btn-group gift-btn-group" role="group">
                                    <button class="btn btn-default gift-btn"
                                            onclick="window.open('https://shop.lego.com/ko-KR/product/10232')"><i
                                            class="fa fa-search"></i></button>
                                    <button class="btn btn-default gift-btn gift-send" data-name="레고"
                                            
                                             onclick="alert('다른분에게 예약된 선물입니다.');"><i
                                            class="fa fa-gift"></i></button>
                                </div>
                            </div>
                            <div class="gift">
                                <img alt="전기레인지" class="img-fluid gift-img gift-selected" src="images/gift/range.png"/>
                                <div class="btn-group gift-btn-group" role="group">
                                    <button class="btn btn-default gift-btn"
                                            onclick="window.open('https://www.lge.co.kr/lgekor/product/kitchen/electricRange/productDetail.do?cateId=4410&prdId=EPRD.333447')">
                                        <i class="fa fa-search"></i></button>
                                    <button class="btn btn-default gift-btn gift-send" data-name="전기레인지"
                                            
                                             onclick="alert('다른분에게 예약된 선물입니다.');"><i
                                            class="fa fa-gift"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        -->
        <div class="ww-section ww-rsvp-detail" id="map">
            <div class="container">
                <div class="col text-center">
                    <h2 class="h1 text-center pb-3 ww-title" style="font-family: 'Noto Serif KR', serif;">오시는 길</h2>
                    <div>
                        <h5 style="font-family: 'Noto Serif KR', serif;">센텀사이언스파크웨딩홀 23층 스카이홀</h5>
                        <h6 style="font-family: 'Noto Serif KR', serif;">(부산 해운대구 센텀중앙로 79)</h6>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-12">
                        <div class="my-3 text-center">
                            <a href="https://naver.me/xcnaMlVU">
                                <img alt="naver-map" class="map-icon" id="naver-map"
                                     src="images/map/naver-map.png"/>
                            </a>
                            <a href="https://kko.kakao.com/q0GMsfThN7">
                                <img alt="kakao-map" class="map-icon" id="kakao-map"
                                     src="images/map/kakao-map.png"/>
                            </a>
                            <a href="https://maps.app.goo.gl/uWFYAzfjKz6hYebE7">
                                <img alt="google-map" class="map-icon" id="google-map"
                                     src="images/map/google-map.png"/>
                            </a>
                        </div>
                        <div class="col text-center">
                            <label style="font-family: 'Noto Serif KR', serif; font-size: 15px;">
                                셔틀버스 - 센텀시티역 4번출구앞에서 15분 간격으로 운행
                            </label>
                        </div>
                        <div class="my-3">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3385.2785074011836!2d127.03078603758975!3d37.258632187871406!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357b436743e39b9f%3A0x2b780a971545dd3!2z7Zi47YWU66as7Lig7Luo67Kk7IWY7Juo65Sp!5e0!3m2!1sko!2skr!4v1754926689254!5m2!1sko!2skr" width="100%" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>


            </div>
        </div>

        <div class="ww-section bg-light" id="comment">
            <div class="ww-photo-gallery">
                <div class="container">
                    <div class="col text-center">
                        <h2 class="h1 text-center pb-3 ww-title" style="font-family: 'Noto Serif KR', serif;">축하메시지</h2><br>
                        <!--div id="comments"></div-->
                        <br>
                        <div class="row">
                            <div class="col text-center">
                                <a class="btn btn-primary btn-submit" href="./guestbook.html">
                                    메시지 남기러 가기
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
</div>
<div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="giftMailModal" role="dialog"
     tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">선물하기 - <span id="gift-name"></span></h5>
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">보내는 분 성함</span>
                    </div>
                    <input aria-describedby="basic-addon3" class="form-control" id="sender-name" type="text">
                </div>
                <div class="input-group">
                    <textarea aria-label="With textarea" class="form-control" id="sender-message"
                              placeholder="신랑, 신부에게 선물 예약과 함께 보낼 메시지를 입력해주세요. 이 메시지는 신랑, 신부에게 발송됩니다." rows=4></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="reserveGiftButton" type="button">예약</button>
            </div>
        </div>
    </div>
</div>
<footer></footer>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="js/aos.js"></script>
<script src="js/parallax.min.js"></script>
<script src="js/ekko-lightbox.min.js"></script>
<script src="scripts/main.js"></script>

<!-- ...body 태그 바로 아래에 추가... -->
<style>
.music-top {
    position:fixed;
    top: 20px;
    left: 20px;
    z-index: 9999;
    background: rgba(255,255,255,0.85);
    border-radius: 30px;
    padding: 8px 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    display:flex;
    align-items:center;
    gap: 1px;
}
#player {
    width: 300px;
    transition: width 0.2s;
}
.music-top button {
    font-size: 8px;
    margin-left: 8px;
    background: #fff;
    border: 1px solid #b48e5c;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    color: #b48e5c;
    cursor: pointer;
    outline: none;
    transition: background 0.2s;
}
.music-top button:hover {
    background: #f5ecd8;
}
</style>
<div class="music-top">
    <audio id="player" src="mus.mp3" controls></audio>
    <button id="decrease-size" title="작게">－</button>
    <button id="increase-size" title="크게">＋</button>
</div>
<!-- ...existing code... -->
<script>
  // 음악 플레이어 크기 조절 기능
  const audioElem = document.getElementById('player');
  let width = 300;
  document.getElementById('decrease-size').onclick = function() {
    width = 0;
    audioElem.style.width = width + 'px';
  };
  document.getElementById('increase-size').onclick = function() {
    width = 200;
    audioElem.style.width = width + 'px';
  };
</script>
<!-- ...existing code... -->
<!-- ...기존 .bottom_left div는 삭제 또는 주석처리 해주세요...
<div class="bottom_left">
    <audio id="player" src="mus.mp3" autoplay muted></audio>
    <div>
        <i class="fa fa-music fa-2x" onclick="document.getElementById('player').muted=false;document.getElementById('player').play()"></i>
    </div>
</div>
-->

<!-- 버튼(어디든) -->
<button id="openGuestbook" class="btn btn-primary">축하 메시지</button>

<!-- 모달 -->
<div id="guestbookModal" style="position:fixed; inset:0; display:none; background:rgba(0,0,0,.5); z-index:9999;">
  <div style="position:relative; margin:4vh auto; width:min(92vw, 840px); background:#fff; border-radius:16px; max-height:92vh; display:flex; flex-direction:column;">
    <div style="display:flex; align-items:center; justify-content:space-between; padding:14px 18px; border-bottom:1px solid #eee;">
      <strong>축하 메시지 ✨</strong>
      <button id="closeGuestbook" aria-label="close" style="border:none; background:none; font-size:20px; cursor:pointer;">✕</button>
    </div>

    <!-- 입력 폼 -->
    <form id="guestbookForm" style="padding:12px 18px; display:grid; grid-template-columns:1fr auto; gap:10px; align-items:start; border-bottom:1px solid #f3f3f3;">
      <input id="gbName" name="name" required placeholder="이름" style="padding:10px; border:1px solid #ddd; border-radius:8px;">
      <button class="btn" style="padding:10px 14px; border-radius:10px; border:1px solid #ddd; background:#f6f6f6;">등록</button>
      <textarea id="gbMsg" name="message" required placeholder="메시지를 입력하세요" rows="3" style="grid-column:1 / -1; padding:10px; border:1px solid #ddd; border-radius:8px;"></textarea>

      <!-- 허니팟(숨김) -->
      <input type="text" name="phone" tabindex="-1" autocomplete="off" style="position:absolute; left:-9999px; width:1px; height:1px;">
    </form>

    <!-- 목록 -->
    <div id="guestbookList" style="padding:16px 18px; overflow:auto;"></div>
  </div>
</div>

<script>
  const GAS_URL = 'https://script.google.com/macros/s/AKfycbxI0X7HBwTcmvbTOsBSqgSfNc4f0W7Aoiwwv_TO_YOMnu3206uavmh_OR7zsqmQiBAl/exec';

  const modal = document.getElementById('guestbookModal');
  const listEl = document.getElementById('guestbookList');

  document.getElementById('openGuestbook').addEventListener('click', () => {
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden'; // 음악 유지, 배경 스크롤 잠금
    loadComments();
  });
  document.getElementById('closeGuestbook').addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
  function closeModal(){ modal.style.display='none'; document.body.style.overflow=''; }

  async function loadComments() {
  const listEl = document.getElementById('guestbookList');
  listEl.textContent = '불러오는 중...';
  try {
    const res = await fetch(GAS_URL);     // 헤더 없이 GET
    if (!res.ok) throw new Error('fetch failed');
    const rows = await res.json();        // [{timestamp,name,message}, ...]
    if (!rows.length) {
      listEl.innerHTML = '<div style="color:#777; padding:24px; text-align:center; border:1px dashed #ddd; border-radius:12px;">아직 메시지가 없습니다. 첫 메시지를 남겨보세요!</div>';
      return;
    }
    listEl.innerHTML = rows.map(renderCard).join('');
  } catch (e) {
    console.error(e);
    listEl.textContent = '메시지를 불러오지 못했습니다. 잠시 후 다시 시도해주세요.';
  }
}

function renderCard(row) {
  const ts = new Date(row.timestamp).toLocaleString();
  return `
    <div style="border:1px solid #eee; border-radius:16px; padding:12px 14px; margin:10px 0;">
      <div style="display:flex; justify-content:space-between; gap:12px; margin-bottom:6px;">
        <strong>${escapeHtml(row.name)}</strong>
        <small style="color:#666;">${ts}</small>
      </div>
      <div style="white-space:pre-wrap; line-height:1.5;">${escapeHtml(row.message)}</div>
    </div>
  `;
}
function escapeHtml(s){ return (s||'').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

document.getElementById('guestbookForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const name = document.getElementById('gbName').value.trim();
  const message = document.getElementById('gbMsg').value.trim();
  if (!name || !message) return;

  try {
    const body = new URLSearchParams({ name, message, phone: '' }); // phone=허니팟
    const res = await fetch(GAS_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
      body
    });
    const json = await res.json();
    if (json.ok) {
      document.getElementById('gbMsg').value = '';
      loadComments(); // 등록 후 즉시 갱신
    } else {
      alert('등록 실패: ' + (json.error || 'unknown'));
    }
  } catch (e) {
    console.error(e);
    alert('등록 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.');
  }
});
</script>


</body>
</html>
